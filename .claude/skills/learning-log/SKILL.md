---
name: learning-log
description: 学習内容を整理・蓄積するスキル。NotebookLM MCPを活用してYouTube・Web記事の理解を自動化し、対話で学びを整理してレポートを生成する。「学習」「学習ログ」「勉強」で起動。
---

# /learning-log - 学習ログ生成スキル

## 概要

YouTube動画やWeb記事、書籍等の学習内容を、NotebookLM MCPで体系的に理解し、対話を通じて自分の言葉で整理する。
最終的に、初学者にもわかりやすい構造化されたナレッジレポートとしてGitに蓄積する。

**重要**: このスキルは**対話駆動型**（`/new-idea` と同様）。NotebookLMによる自動分析と、ユーザーとの対話を組み合わせて進める。

## ワークフロー

以下のステップを順番に実行する。Step 4 はユーザーとの対話を挟むため、ユーザーの応答を待ってから次に進むこと。

### Step 1: プロフィール読み込みと準備

1. Read ツールで `/home/a/00.knowledge-hub/PROFILE.md` を読み込み、興味領域・学習中の分野・スキルセットを把握する
2. Glob ツールで `03.Learnings/**/*` を確認し、既存の学習ログリストを取得する（重複チェック用）
3. ToolSearch ツールで NotebookLM MCP ツール群を検索する（キーワード: `notebooklm`）
   - ツールが見つからない場合 → 「NotebookLM MCPフォールバック」セクションに従う

### Step 2: 学習テーマのヒアリング

ユーザーに以下のように話しかけて対話を開始する:

> 何について学びましたか？
>
> - **YouTube動画** → URLを貼ってください
> - **Web記事** → URLを貼ってください
> - **書籍・その他** → タイトルと学んだ内容を教えてください

ユーザーの回答を受けて分岐する:

- **YouTube URL / Web URL が提供された場合** → Step 3 へ
- **書籍・その他の場合** → Step 3 をスキップし、Step 4 へ（対話のみフロー）

追加で以下を確認する（最大1問）:
- なぜこのテーマを学ぼうと思ったか（動機・きっかけ）

**注意**: 1回の応答で質問は最大2問まで。質問攻めにしない。

### Step 3: NotebookLMでのソース登録・理解（URL入力時のみ）

NotebookLM MCPツールを使って、学習ソースを体系的に理解する。

#### 3-1. ノートブック作成

`notebook_create` ツールでノートブックを作成する。

- タイトル: `学習ログ: {学習テーマ} ({YYYY-MM-DD})`

#### 3-2. ソース追加

`source_add` ツールでURLをソースに追加する。

- 追加失敗した場合 → 「ソース追加フォールバック」セクションに従う

#### 3-3. 要約・構造化クエリ

`notebook_query` ツールで以下の3つのクエリを順次実行する。
各クエリの内容は `references/notebooklm-queries.md` を参照すること。

1. **全体要約クエリ**: 主要ポイント5〜7個（初学者向け、専門用語解説付き）
2. **構造化クエリ**: 前提知識 / コアコンセプト / 具体例 / アクションアイテム
3. **PROFILE連動クエリ**: PROFILE.mdの興味領域に基づいた応用分析

**注意**: 各クエリ実行間に1秒以上のスリープを入れること。

### Step 4: 学習内容の対話的整理（2〜3ラウンド）

NotebookLMの分析結果（またはユーザーの説明）を元に、対話で学びを深める。

#### ラウンド1: 理解の確認

NotebookLMの要約結果をユーザーに提示し、以下を確認する:

> NotebookLMの分析結果をまとめました:
>
> {全体要約の結果}
>
> - この内容で合っていますか？補足したいポイントはありますか？
> - 特に「なるほど」と思ったポイントはどこですか？

**書籍・その他の場合**: ユーザーの説明を元にClaude自身が要約を作成し、同様の確認を行う。情報が不足している場合は追加ヒアリングする（最大2問）。

#### ラウンド2: 応用と接続

> この学びを実務にどう活かせそうですか？
>
> 参考として、以下の応用が考えられます:
> {PROFILE連動クエリの結果}
>
> 他に思いつく応用はありますか？

#### ラウンド3: 振り返りと次のアクション

> この学習で一番の収穫は何でしたか？
> 次に学ぶべきテーマとして何がありそうですか？

2〜3ラウンドで情報が揃ったら:

> 学びの整理ができましたね。レポートとしてまとめましょうか？
> 他に話したいことがあればもう少し続けましょう。

### Step 5: レポート生成

`references/report-template.md` のテンプレートに従って、`03.Learnings/YYYY-MM-DD_{title}/REPORT.md` を生成する。

#### レポートの品質基準

- **初学者レベルのわかりやすさ**で記述する（最重要）
- 専門用語には必ず括弧内で解説を付ける
- **Mermaid図を最低1つ含める**（概念の関係図、フローチャート、マインドマップ等）
- NotebookLMの出力をそのまま使わず、対話の内容と統合して**Claude自身がわかりやすく書き直す**
- 英語のソースの場合、レポート本文は日本語で記述する

#### Mermaid図の選択基準

| テーマの性質 | 推奨Mermaid図 | 例 |
|-------------|--------------|-----|
| プロセス・手順 | `flowchart TD` | CI/CDパイプライン、デプロイフロー |
| 概念の関係性 | `graph LR` | アーキテクチャパターン |
| クラス・モジュール構造 | `classDiagram` | DDDの集約、レイヤー構造 |
| 状態遷移 | `stateDiagram-v2` | ライフサイクル、認証フロー |
| トピックの全体像 | `mindmap` | コンセプトマップ |

#### ファイル名ルール

- `{title}` は学習テーマを短く表したもの（日本語可、英語可）
- ファイル名に使えない文字（`/`, `\`, `:`, `*`, `?`, `"`, `<`, `>`, `|`）は全角に変換する
- スペースはハイフン `-` に置換する

### Step 6: ユーザー確認

生成したレポートの内容をユーザーに表示し、確認を取る。

> レポートを作成しました。内容を確認してください。
> 修正したい箇所があればお知らせください。

修正の依頼があれば対応する。なければ次のステップに進む。

### Step 7: 完了報告

以下の情報を表示して完了とする:

1. **生成ファイル**: `03.Learnings/YYYY-MM-DD_{title}/REPORT.md`
2. **NotebookLMノートブック**: ノートブック名を案内（後から追加の質問やソース追加に使える）
3. **ネクストステップ**: レポートの「ネクストステップ」セクションから具体的なアクションを案内

---

## NotebookLM MCPツールの利用

### 使用ツール一覧

| ステップ | ツール | 用途 |
|---------|--------|------|
| Step 1 | ToolSearch | NotebookLM MCPツールの読み込み |
| Step 3-1 | `notebook_create` | 学習用ノートブック作成 |
| Step 3-2 | `source_add` | URLをソースに追加 |
| Step 3-3 | `notebook_query` × 3回 | 要約・構造化・PROFILE連動分析 |
| Step 4（必要時） | `notebook_query` | 対話中の追加質問・深掘り |

### ツール呼び出しの注意

- 各ツール呼び出しの間に**1秒以上のスリープ**を入れる
- `notebook_query` の結果が空または不十分な場合、プロンプトを言い換えて再実行する（**最大2回**まで）

---

## エラーハンドリング

### NotebookLM MCPフォールバック

Step 1 で NotebookLM MCP ツールが見つからない場合、または認証エラーが発生した場合:

1. ユーザーにセットアップ手順を案内する:

> NotebookLM MCPが利用できません。以下の手順で設定できます:
>
> 1. `uv tool install notebooklm-mcp-cli`
> 2. `claude mcp add --scope user notebooklm-mcp notebooklm-mcp`
> 3. `nlm login`（ブラウザでGoogle認証）
>
> NotebookLMなしでも学習ログは作成できます。対話形式で続けますか？

2. ユーザーが続行を希望した場合 → WebFetch でソースの内容を取得し、Claude自身で要約・構造化を行う（Step 3 の代替）
3. WebFetch も失敗した場合 → 対話のみフロー（Step 4）に切り替える

### ソース追加フォールバック

Step 3-2 で `source_add` が失敗した場合:

1. WebFetch ツールでソースの内容を取得する
2. 取得できた場合 → テキストとして `source_add` を再試行する
3. それでも失敗した場合 → ユーザーに状況を報告し、WebFetch の結果を元にClaude自身で分析を行う

### 日次制限超過

NotebookLM の日次制限に達した場合:

> NotebookLMの利用制限に達しました。
> 対話形式で続けるか、明日改めて実行することもできます。どうしますか？

---

## 注意事項

- 全てのドキュメントは日本語で記述する
- 既存ファイルの上書きは禁止（同名ディレクトリが存在する場合はユーザーに確認する）
- 対話は急がない。ユーザーのペースに合わせる
- NotebookLMの出力は「素材」として扱い、そのまま使わない。Claude自身がわかりやすく書き直す
- レポートの「実務への応用」セクションは、PROFILE.mdの情報を活用して具体的にする
