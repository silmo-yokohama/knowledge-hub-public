# 要件定義書: knowledge-hub

## 1. プロジェクト概要

### プロジェクト名

knowledge-hub

### 作成日

2026-02-08

### 作成者

清水陽平（SilMo）

---

## 2. 5W1H

### Why（なぜ）

**背景・目的**

- 日々変化する技術トレンドやニュースを追い続けるのが難しい
- インプットした情報が散逸し、ナレッジとして蓄積されていない
- アイデアが浮かんでも整理・管理されずに埋もれてしまう
- 学習した内容が体系的にまとめられていない

**ゴール**

日々のインプット（ニュース・学習）を一元管理し、そこからアイデアを生み出してアウトプット（ブログ等）につなげるナレッジハブを構築する。

### What（何を）

**実現すること**

以下の3つの中核機能を持つナレッジ管理プラットフォームを構築する。

1. **AIキャッチアップ支援** - 興味領域のニュース・トレンドを自動収集し、AIが要約・深掘り・議論の分析を行う
2. **アイデア整理** - AIとの対話でアイデアを練り上げ、企画書化し、GitHub上でタスク管理する
3. **学習ログ** - YouTube/Udemy等の学習内容を要約・整理し、ナレッジとして蓄積する

**スコープ外**

- Webアプリケーションの構築（UIはClaude Codeのターミナルで代替）
- X (Twitter) からのデータ取得（コスト面の問題により対象外）
- キャリア管理機能（学習ログに統合）

### Who（誰が）

**ステークホルダー**

- 開発者：清水陽平（個人開発）
- ユーザー：清水陽平（自分自身）
- AI パートナー：Claude Code（開発・運用の両方で活用）

### When（いつ）

**スケジュール**

- 開始予定日：2026-02-08
- v0 完了目標：1日（AIキャッチアップ支援のみ）
- マイルストーン：
  - v0: AIキャッチアップ支援（`/daily-trends`, `/detail-catch-up`）
  - v1: アイデア整理（`/new-idea`）
  - v2: 学習ログ（学習記録スキル）
  - v3: ブログ執筆サポート（`/write-blog`）

### Where（どこで）

**環境・プラットフォーム**

- 開発環境：ローカル（VSCode + Claude Code）
- 実行環境：ターミナル（Claude Codeスキルとして実行）
- データ管理：GitHubリポジトリ（`knowledge-hub`）
- タスク管理：GitHub Issues + GitHub Projects（カンバン形式）

### How（どのように）

**実現方法・アプローチ**

- **インターフェース**: Claude Codeのスキル（`/daily-trends`, `/detail-catch-up`, `/new-idea`, `/write-blog`等）
- **データソース**: はてなブックマーク（RSS/API）、Reddit（API）、Yahoo News（WebFetch）
- **学習ログ用**: YouTube字幕（`youtube-transcript-api`）、Udemy（手動+対話形式）
- **AI処理**: Claude Code自体のAI機能を活用（要約、深掘り、議論分析）
- **タスク管理**: GitHub MCP（Issues登録、Projectsステータス更新の自動化）
- **成果物管理**: Markdownファイルとしてリポジトリに保存
- **プロフィール管理**: `PROFILE.md` に興味領域を定義し、記事のマッチング評価に活用

---

## 3. 機能要件

### 3.1 必須機能（Must Have）

#### 1. `/daily-trends` - トレンド記事収集・評価レポート

- **概要**: 各種ニュースソースを横断的に探索し、PROFILE.mdの興味領域にマッチする記事を収集・評価してレポートを生成する
- **入力**: なし（PROFILE.mdを参照）
- **処理**:
  1. はてなブックマーク（RSS）、Yahoo News（WebFetch）、Reddit（API）から記事を取得
  2. 記事タイトル・URL・ブックマーク数（いいね数・コメント数）を収集
  3. PROFILE.mdの興味関心とのマッチ度を評価
  4. カテゴリ別に分類し、評価の高い順にソート
- **出力**: `01.Trends/Headlines/YYYY-MM/YYYY-MM-DD.md`
  - チェックボックス付きの記事一覧（VSCodeのMarkdownプレビューでクリック選択可能）
  - カテゴリ別に分類
  - 評価スコア、ブックマーク数等のメタ情報付き

#### 2. `/detail-catch-up` - 記事詳細分析レポート

- **概要**: `/daily-trends`でユーザーがチェックした記事を詳細に分析し、レポートを生成する
- **入力**: チェック済みの`daily-trends`レポート（Markdownファイル）
- **処理**:
  1. チェックされた記事のURLにアクセス（WebFetch）
  2. 記事内のコンテンツ・引用先も含めて内容を確認
  3. 書かれている内容を要約
  4. ユーザーの興味関心が高そうなポイントを深掘り
  5. コメント等で議論が発生している場合、議論の内容・肯定vs否定の勢力差をまとめる（中立的な立場から）
- **出力**: 1記事につき1レポート → `01.Trends/DeepDives/YYYY-MM/YYYY-MM-DD_{title}.md`

#### 3. PROFILE.md による興味領域管理

- **概要**: ユーザーの興味関心領域を定義するファイル。各スキルがこのファイルを参照して記事のマッチング評価等を行う
- **内容**: 基本情報、仕事分野、趣味分野、特に興味関心が強い分野（深掘りしたい/まだ詳しくない）

### 3.2 推奨機能（Should Have）

#### 1. `/new-idea` - アイデア壁打ち・企画書作成

- **概要**: Claude Codeとの対話でアイデアをヒアリング・深掘りし、企画書としてまとめ、GitHub Issuesに登録する
- **処理**:
  1. 対話形式でアイデアをヒアリング（質問→回答→深掘り）
  2. イエスマンにならず、忌憚なく意見を言う（実現可能性・リスク・差別化の指摘）
  3. カテゴリ分類（技術系/事業/趣味・プライベート/その他）
  4. 企画書をMarkdownとして保存
  5. GitHub MCP を使って Issues に自動登録（ラベル付き）
  6. GitHub Projects のカンバンにも自動追加
- **出力**: `02.Ideas/YYYY-MM-DD_{title}/` 配下に以下を生成
  - `discussion.md` - 壁打ちの記録
  - `overview.md` - 企画書
  - `references.md` - 参考資料

#### 2. 学習ログスキル

- **概要**: YouTube/Udemyの学習内容を要約し、対話形式で学びを深掘りしてナレッジとして蓄積する
- **処理**:
  1. 動画URLを受け取り、字幕を取得して内容を把握（YouTube: `youtube-transcript-api`）
  2. 内容を要約
  3. 対話形式で「何を学んだか」「どう活かせるか」を整理
  4. ナレッジレポートを生成
- **出力**: `03.Learnings/YYYY-MM-DD_{title}/REPORT.md`
- **レポート品質要件**:
  - 初学者レベルのわかりやすさで記述
  - 専門用語には必ず解説を付ける
  - Mermaid図を活用して視覚的に理解しやすくする

### 3.3 任意機能（Could Have）

#### 1. `/write-blog` - ブログ執筆サポート

- **概要**: 蓄積されたレポートを元にブログ記事を執筆する
- **処理**:
  1. ネタにしたい記事のレポートを指定
  2. ユーザーに成り代わってブログ記事を執筆
  3. `microcms-blog-post` スキル（今後作成予定）と連携して自動投稿
- **出力**: `04.BlogDrafts/YYYY-MM-DD_{title}/draft.md`
- **備考**: 毎回行うものではなく、特に興味関心が高い記事に対して手動で実行

---

## 4. 非機能要件

### 4.1 パフォーマンス

- `/daily-trends` の実行時間：数分以内（複数ソースからの取得を含む）
- `/detail-catch-up` の実行時間：1記事あたり1〜2分程度
- APIレート制限を考慮し、適切な間隔でリクエストを行うこと

### 4.2 セキュリティ

- APIキー等の認証情報は `.env` や環境変数で管理し、リポジトリにコミットしない
- Reddit OAuth認証情報の安全な管理
- 個人情報（PROFILE.md）が公開リポジトリに公開されないよう注意

### 4.3 可用性・信頼性

- 外部APIがダウンしている場合、エラーを適切にハンドリングし、取得可能なソースのみでレポートを生成する
- レポートの上書き防止（同日の既存レポートがある場合の挙動を定義）

### 4.4 保守性・拡張性

- 新しいデータソースの追加が容易な設計にする
- PROFILE.md の興味領域を変更するだけで、記事収集の対象を柔軟に変更可能
- 各スキルは独立して動作し、個別にアップデート可能

---

## 5. 制約条件

### 5.1 技術的制約

- Claude Codeのスキルとして実装（Webアプリは作らない）
- GitHub MCP を活用した Issues/Projects 連携
- 外部API利用時はレート制限を遵守すること

### 5.2 予算・コスト制約

- 予算：基本無料（個人開発のため）
- 全てのデータソースは無料枠の範囲で利用すること
- 有料サービスは使用しない（X API は対象外とした理由）

### 5.3 時間的制約

- v0（AIキャッチアップ支援）を1日で形にする
- 個人開発のため、開発に使える時間は限られている

### 5.4 その他の制約

- リポジトリはプライベートリポジトリとして運用する（PROFILE.mdに個人情報を含むため）
- アイデア管理はこのリポジトリ内で完結させる（外部ツールに依存しない）

---

## 6. リスクと対策

### 6.1 技術的リスク

| リスク | 影響度 | 発生確率 | 対策 |
|--------|--------|----------|------|
| はてなブックマークAPI/RSSの仕様変更 | 中 | 低 | RSSとAPIの両方に対応し、フォールバック可能にする |
| youtube-transcript-api の動作不能 | 中 | 中 | 非公式API依存のため突然動かなくなる可能性あり。手動入力+対話形式にフォールバック |
| Reddit APIのレート制限超過 | 低 | 低 | 100リクエスト/分は十分な枠。適切な間隔でリクエスト |
| WebFetchで記事内容を正確に取得できない | 中 | 中 | サイトによっては取得困難。取得できない場合はスキップしてユーザーに通知 |

### 6.2 スケジュールリスク

| リスク | 影響度 | 発生確率 | 対策 |
|--------|--------|----------|------|
| v0を1日で完成できない | 中 | 中 | 最小限の機能（はてブのみ）に絞ってまず動くものを作る |
| スキル実装の複雑化 | 中 | 中 | シンプルな設計を維持し、段階的に機能追加する |

---

## 7. 実現可能性の検証

### 7.1 技術的実現可能性

#### はてなブックマーク

- **検証結果**: ✅ 実現可能
- **根拠**: RSSフィード（認証不要）でカテゴリ別の人気エントリーを取得可能。ブコメも `entry/jsonlite` API（認証不要）で取得可能。レート制限も緩い。

#### Reddit

- **検証結果**: ✅ 実現可能
- **根拠**: 非商用利用なら無料。OAuth 2.0（scriptタイプ）で認証し、100リクエスト/分で利用可能。トレンド投稿・コメント取得のAPIも充実。

#### Yahoo News

- **検証結果**: ✅ 実現可能
- **根拠**: WebFetchで記事内容を取得可能。公式APIはないが、スクレイピングベースで対応。

#### YouTube字幕取得

- **検証結果**: ✅ 実現可能（リスクあり）
- **根拠**: `youtube-transcript-api`（Python）で無料・認証不要で取得可能。ただし非公式API依存のため長期的な安定性に不安あり。

### 7.2 コスト的実現可能性

- **想定コスト**: 0円（全て無料枠の範囲で利用可能）
- **予算との比較**: ✅ 実現可能
- **根拠**: はてブ（無料）、Reddit（非商用無料）、YouTube字幕（無料ライブラリ）、GitHub（無料）

### 7.3 時間的実現可能性

- **想定工数**: v0（daily-trends + detail-catch-up）= 1日
- **スケジュールとの比較**: ✅ 実現可能（ただしタイト）
- **根拠**: Claude Codeスキルとしての実装はWebアプリと比較して軽量。ただし複数データソースの統合があるため、まずはてブのみで動くv0.1を目指し、段階的に拡張する方が現実的。

---

## 8. 懸念事項・課題

### 8.1 技術的懸念

1. **WebFetchの精度**
   - 詳細：サイトによってはJavaScriptレンダリングが必要な場合があり、WebFetchで正確にコンテンツを取得できない可能性がある
   - 影響：`/detail-catch-up` の分析精度に影響
   - 対応方針：取得できない場合はスキップし、ユーザーに通知する

2. **ブコメの議論分析精度**
   - 詳細：短いブコメから議論の構図（肯定vs否定）を正確に分析するのはAIにとっても難易度が高い
   - 影響：議論のまとめの品質にばらつきが出る可能性
   - 対応方針：v0ではベストエフォートで対応。精度が不十分な場合はプロンプトを改善

### 8.2 運用的懸念

1. **日次実行の継続性**
   - 詳細：`/daily-trends`を毎日手動で実行する必要がある
   - 影響：忙しい日はスキップしてしまう可能性
   - 対応方針：まずは手動運用で開始。将来的にcron等での自動実行を検討

---

## 9. 次のステップ

### 9.1 即座に実行

1. リポジトリのディレクトリ構成を作成する
2. CLAUDE.md にプロジェクト固有のルールを記載する
3. `/daily-trends` スキルを実装する
4. `/detail-catch-up` スキルを実装する

### 9.2 短期（1〜2週間）

1. `/new-idea` スキルを実装する
2. GitHub Projects のカンバンボードをセットアップする
3. 学習ログスキルを実装する

### 9.3 中期（1〜3ヶ月）

1. `/write-blog` スキルを実装する
2. `microcms-blog-post` スキルを作成し連携する
3. 運用を通じて各スキルのプロンプトを改善する
4. 必要に応じて新しいデータソースを追加する

---

## 10. 補足資料

### 10.1 ディレクトリ構成

```
knowledge-hub/
├── 01.Trends/                        # トレンド・キャッチアップ
│   ├── Headlines/                    # /daily-trends のレポート
│   │   └── YYYY-MM/
│   │       └── YYYY-MM-DD.md
│   └── DeepDives/                    # /detail-catch-up のレポート
│       └── YYYY-MM/
│           └── YYYY-MM-DD_{title}.md
├── 02.Ideas/                         # アイデア
│   └── YYYY-MM-DD_{title}/
│       ├── discussion.md             # 壁打ちの記録
│       ├── overview.md               # 企画書
│       └── references.md             # 参考資料
├── 03.Learnings/                     # 学習ログ
│   └── YYYY-MM-DD_{title}/
│       └── REPORT.md
├── 04.BlogDrafts/                    # ブログ下書き
│   └── YYYY-MM-DD_{title}/
│       └── draft.md
├── PROFILE.md                        # 興味領域の定義
├── CLAUDE.md                         # プロジェクト固有のルール
└── README.md
```

### 10.2 データソース一覧

| ソース | 用途 | 取得方法 | 認証 | コスト |
|--------|------|----------|------|--------|
| はてなブックマーク | 技術系記事・ブコメ | RSS / API | 不要 | 無料 |
| Reddit | 海外トレンド・議論 | OAuth API | 必要 | 無料（非商用） |
| Yahoo News | 一般ニュース | WebFetch | 不要 | 無料 |
| YouTube | 学習動画の字幕 | youtube-transcript-api | 不要 | 無料 |

### 10.3 スキル一覧

| スキル名 | 機能 | 優先度 | フェーズ |
|----------|------|--------|----------|
| `/daily-trends` | トレンド記事収集・評価レポート | 最優先 | v0 |
| `/detail-catch-up` | 記事詳細分析レポート | 最優先 | v0 |
| `/new-idea` | アイデア壁打ち・企画書作成 | 高 | v1 |
| 学習ログスキル | 学習内容の要約・蓄積 | 中 | v2 |
| `/write-blog` | ブログ執筆サポート | 低 | v3 |

---

## 承認

### レビュー状況

- [ ] 要件が明確になっている
- [ ] 5W1Hが全て埋まっている
- [ ] 実現可能性が検証されている
- [ ] リスクと対策が明記されている
- [ ] 次のステップが明確になっている

### 承認日

[YYYY-MM-DD]

### 承認者

清水陽平
